{{- if .Values.builtinObjects.enabled }}
{{- $providerConfigName := tpl .Values.providerConfig.name $ | required ".Values.providerConfig.name is required" }}
{{- $providerConfigSecretName := tpl .Values.providerConfig.secretName $ | required ".Values.providerConfig.secretName is required" }}
{{- $realmName := tpl .Values.realm.name $ }}
{{- $namespace := .Release.Namespace }}
---
apiVersion: keycloak.m.crossplane.io/v1alpha1
kind: XBuiltinObjects
metadata:
  name: "keycloak-builtin-objects-{{ $realmName }}"
  namespace: {{ $namespace }}
spec:
  providerConfigName: "{{ $providerConfigName }}"
  providerSecretName: "{{ $providerConfigSecretName }}"
  realm: "{{ $realmName }}"
  {{- tpl (.Values.builtinObjects.spec | toYaml) $ | nindent 2 }}
{{- end }}
